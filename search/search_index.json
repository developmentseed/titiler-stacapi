{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"titiler-stacapi","text":"<p> <p>Connect titiler to STAC APIs</p> </p> <p> </p> <p>Documentation: developmentseed.org/titiler-stacapi/</p> <p>Source Code: developmentseed/titiler-stacapi</p>"},{"location":"#installation","title":"Installation","text":"<p>To install from PyPI and run:</p> <pre><code># Make sure you have pip up to date\npython -m pip install -U pip\npython -m pip  install titiler.stacapi\n</code></pre> <p>To install from sources and run for development:</p> <p>We recommand using <code>uv</code> as project manager for development.</p> <p>See docs.astral.sh/uv/getting-started/installation/ for installation </p> <pre><code>git clone https://github.com/developmentseed/titiler-stacapi.git\ncd titiler-stacapi\n\nuv sync\n</code></pre>"},{"location":"#launch","title":"Launch","text":"<p>You'll need to have <code>TITILER_STACAPI_STAC_API_URL</code> variables set in your environment pointing to your STAC API service.</p> <pre><code>export TITILER_STACAPI_STAC_API_URL=https://api.stac\n\nuv run --extra server uvicorn titiler.stacapi.main:app --port 8000\n</code></pre>"},{"location":"#using-docker","title":"Using Docker","text":"<pre><code>$ git clone https://github.com/developmentseed/titiler-stacapi.git\n$ cd titiler-stacapi\n$ export TITILER_STACAPI_STAC_API_URL=https://api.stac\n$ docker-compose up --build api\n</code></pre> <p>It runs <code>titiler.stacapi</code> using Uvicorn web server.</p>"},{"location":"#how-it-works","title":"How it works","text":""},{"location":"#wmts-and-the-render-extension","title":"WMTS and the Render extension","text":"<p><code>titiler-stacapi</code> makes extensive use of the Render extension, specifically at the <code>Collection</code> level. By using the render's metadata, the <code>/wmts</code> endpoint (from the <code>OGCEndpointsFactory</code> factory) can populate a set of <code>layers</code> returned by the <code>GetCapabilities</code> service.</p>"},{"location":"#contribution-development","title":"Contribution &amp; Development","text":"<p>See CONTRIBUTING.md</p>"},{"location":"#license","title":"License","text":"<p>See LICENSE</p>"},{"location":"#authors","title":"Authors","text":"<p>See contributors for a listing of individual contributors.</p>"},{"location":"#changes","title":"Changes","text":"<p>See CHANGES.md.</p>"},{"location":"contributing/","title":"Development - Contributing","text":"<p>Issues and pull requests are more than welcome: github.com/developmentseed/titiler-stacapi/issues</p> <p>We recommand using <code>uv</code> as project manager for development.</p> <p>See docs.astral.sh/uv/getting-started/installation/ for installation </p> <p>dev install</p> <pre><code>git clone https://github.com/developmentseed/titiler-stacapi.git\ncd titiler-stacapi\n\nuv sync\n</code></pre> <p>You can then run the tests with the following command:</p> <pre><code>uv run pytest --cov titiler.stacapi --cov-report term-missing\n</code></pre> <p>This repo is set to use <code>pre-commit</code> to run isort, flake8, pydocstring, black (\"uncompromising Python code formatter\") and mypy when committing new code.</p> <pre><code>uv run pre-commit install\n\n# If needed, you can run pre-commit script manually \nuv run pre-commit run --all-files \n</code></pre>"},{"location":"contributing/#docs","title":"Docs","text":"<pre><code>git clone https://github.com/developmentseed/titiler-stacapi.git\ncd titiler-stacapi\n\n# Build docs\nuv run --group docs mkdocs build -f docs/mkdocs.yml\n</code></pre> <p>Hot-reloading docs:</p> <pre><code>uv run --group docs mkdocs serve -f docs/mkdocs.yml --livereload\n</code></pre> <p>To manually deploy docs (note you should never need to do this because Github Actions deploys automatically for new commits.):</p> <pre><code>uv run --group docs mkdocs gh-deploy -f docs/mkdocs.yml\n</code></pre>"},{"location":"release-notes/","title":"Release notes","text":""},{"location":"release-notes/#unreleased","title":"Unreleased","text":""},{"location":"release-notes/#112-2026-02-12","title":"1.1.2 - 2026-02-12","text":"<ul> <li>fix: render's parameter handling and query-parameter override</li> </ul>"},{"location":"release-notes/#111-2026-02-09","title":"1.1.1 - 2026-02-09","text":"<ul> <li>fix: <code>APIParams</code> type to make URL a required key</li> </ul>"},{"location":"release-notes/#110-2026-02-09","title":"1.1.0 - 2026-02-09","text":"<ul> <li>add: OGC Web Map Server Implementation Specification <code>/wms</code> endpoint</li> </ul>"},{"location":"release-notes/#100-2026-02-06","title":"1.0.0 - 2026-02-06","text":"<ul> <li>update titiler requirements to <code>&gt;=1.0,&lt;1.1</code></li> <li>add support for python 3.14</li> <li>update type hints for python &gt;=3.11</li> <li>move and rename <code>titiler.stacapi.backend.CustomSTACReader</code> to <code>titiler.stacapi.reader.SimpleSTACReader</code></li> <li>delete <code>utils</code> sub-module (utility functions have been moved to <code>titiler.core</code>)</li> <li>rename <code>titiler.stacapi.reader.STACReader</code> to <code>STACAPIReader</code></li> <li>add <code>ids</code>, <code>filter-lang</code> and <code>filter</code> parameters to collection's queries</li> <li>refactor <code>STACAPIBackend</code> to use rio-tiler's mosaic backend</li> <li>add <code>/conformance</code> endpoint</li> <li>replace <code>/debug</code> endpoint by <code>/healthz</code></li> <li>add more links to the landing page</li> <li>add WMTS extensions to the Items and Collections endpoints</li> <li>remove custom <code>MosaicTilerFactory</code> and default to the one from <code>titiler.mosaic</code></li> <li>remove unused <code>STACSettings</code>. Alternate HREF key env needs to be defined using <code>RIO_TILER_STAC_ALTERNATE_KEY</code></li> </ul>"},{"location":"release-notes/#040-2025-11-06","title":"0.4.0 - 2025-11-06","text":"<ul> <li>switch to <code>uv</code> for development</li> <li>switch to <code>hatch</code> for python package build-system</li> <li>add support for python version 3.13</li> <li>bump minimum python version to 3.11</li> <li>update docker image to python:3.13</li> <li>Upgrade to become compatible with titiler.core/titiler.mosaic v0.19 (author @jverrydt, developmentseed/titiler-stacapi!32)</li> </ul>"},{"location":"release-notes/#033-2025-11-06","title":"0.3.3 - 2025-11-06","text":"<ul> <li>fix single date query to only select one day (author @wschoors, developmentseed/titiler-stacapi!34)</li> </ul>"},{"location":"release-notes/#032-2025-05-19","title":"0.3.2 - 2025-05-19","text":"<ul> <li>Align ows:Title, Identifier and Abstract in WMTS GetCapabilities (author @jverrydt, developmentseed/titiler-stacapi!31)</li> </ul>"},{"location":"release-notes/#031-2025-02-25","title":"0.3.1 - 2025-02-25","text":"<ul> <li>use only cql2-text for GET request filter parameter (author @jverrydt, developmentseed/titiler-stacapi!30)</li> </ul>"},{"location":"release-notes/#030-2025-02-24","title":"0.3.0 - 2025-02-24","text":"<ul> <li>Add STAC filter / sort search parameters in <code>/collections</code> endpoints (author @jverrydt, developmentseed/titiler-stacapi!29)</li> </ul>"},{"location":"release-notes/#020-2024-11-19","title":"0.2.0 - 2024-11-19","text":"<ul> <li>add support for aggregations stac-api extension to fetch dynamic time information (author @jverrydt, developmentseed/titiler-stacapi!28)</li> </ul>"},{"location":"release-notes/#011-2024-08-20","title":"0.1.1 - 2024-08-20","text":"<ul> <li>add support for <code>cube:dimensions</code> extension (author @jverrydt, developmentseed/titiler-stacapi!26)</li> <li>allow overriding the colormap/expression in the  (author @jverrydt, developmentseed/titiler-stacapi!26)</li> </ul>"},{"location":"release-notes/#010-2024-06-11","title":"0.1.0 - 2024-06-11","text":"<ul> <li>initial release</li> </ul>"},{"location":"technical-considerations/","title":"Technical Considerations","text":""},{"location":"technical-considerations/#optimizing-tile-requests-in-titiler-stacapi","title":"Optimizing Tile Requests in titiler-stacapi","text":"<p>To enhance the efficiency of tile requests in titiler-stacapi, it's essential to set appropriate zoom levels and bounding boxes and be mindful of the number of requests made to the STAC API. This guide will walk you through understanding and applying these settings to improve performance and avoid overloading the service with expansive queries.</p>"},{"location":"technical-considerations/#understanding-zoom-levels","title":"Understanding Zoom Levels","text":"<p>Zoom levels dictate the level of detail in the tiles requested. Specifying a range (min/max) can significantly optimize request times and resource usage.</p>"},{"location":"technical-considerations/#bounding-box-considerations","title":"Bounding Box Considerations","text":"<p>The bounding box limits the geographical area of interest, preventing unnecessarily broad tile generation. Define this based on your application's specific needs to reduce load times and server strain.</p>"},{"location":"technical-considerations/#mindful-usage-of-stac-api-requests","title":"Mindful Usage of STAC API Requests","text":"<p>Each tile request to titiler-stacapi results in one request to a STAC API <code>/search</code>. It's vital to use this feature respectfully towards STAC API providers by being aware of the request load. High volumes of tile requests translate to an equal number of STAC API requests, which could overwhelm the API endpoints.</p> <p>For detailed examples and more on optimizing your usage of titiler-stacapi, refer to the project's primary documentation.</p>"},{"location":"custom/application_with_auth/","title":"Authentication","text":"<p>Goal: add <code>Authentication</code> forwarding to the <code>/wmts</code> endpoints</p> <p>requirements: titiler.stacapi</p> <pre><code>\"\"\"TiTiler+stacapi FastAPI application.\"\"\"\n\nfrom dataclasses import dataclass, field\n\nfrom fastapi import Depends, FastAPI\nfrom fastapi.security import APIKeyHeader\nfrom starlette.middleware.cors import CORSMiddleware\nfrom starlette.requests import Request\nfrom typing_extensions import Annotated\n\nimport morecantile\nfrom titiler.core.dependencies import DefaultDependency\nfrom titiler.core.errors import DEFAULT_STATUS_CODES, add_exception_handlers\nfrom titiler.core.middleware import CacheControlMiddleware\nfrom titiler.mosaic.errors import MOSAIC_STATUS_CODES\nfrom titiler.stacapi import __version__ as titiler_stacapi_version\nfrom titiler.stacapi.dependencies import APIParams\nfrom titiler.stacapi.factory import OGCEndpointsFactory\nfrom titiler.stacapi.settings import ApiSettings, STACAPISettings\n\nsettings = ApiSettings()\nstacapi_config = STACAPISettings()\n\n\nheader_scheme = APIKeyHeader(name=\"Authorization\", description=\"STAC API Authorization\")\n\n\n@dataclass(init=False)\nclass BackendParams(DefaultDependency):\n    \"\"\"backend parameters.\"\"\"\n\n    api_params: APIParams = field(init=False)\n\n    def __init__(self, request: Request, token: Annotated[str, Depends(header_scheme)]):\n        \"\"\"Initialize BackendParams\n\n        Note: Because we don't want `api_params` to appear in the documentation we use a dataclass with a custom `__init__` method.\n        FastAPI will use the `__init__` method but will exclude Request in the documentation making `api_params` an invisible dependency.\n        \"\"\"\n        self.api_params = APIParams(\n            url=request.app.state.stac_url,\n            headers={\"Authorization\": token},\n        )\n\n\napp = FastAPI(\n    title=settings.name,\n    openapi_url=\"/api\",\n    docs_url=\"/api.html\",\n    description=\"\"\"Connect titiler to STAC APIs.\"\"\",\n    version=titiler_stacapi_version,\n    root_path=settings.root_path,\n)\n\n# We store the STAC API url in the application state\napp.state.stac_url = stacapi_config.stac_api_url\n\nadd_exception_handlers(app, DEFAULT_STATUS_CODES)\nadd_exception_handlers(app, MOSAIC_STATUS_CODES)\n\n# Set all CORS enabled origins\nif settings.cors_origins:\n    app.add_middleware(\n        CORSMiddleware,\n        allow_origins=settings.cors_origins,\n        allow_credentials=True,\n        allow_methods=[\"GET\"],\n        allow_headers=[\"*\"],\n    )\n\napp.add_middleware(CacheControlMiddleware, cachecontrol=settings.cachecontrol)\n\nwebmerc = morecantile.tms.get(\"WebMercatorQuad\").model_dump()\nwebmerc[\"id\"] = \"EPSG3857\"\nsupported_tms = morecantile.TileMatrixSets({\"EPSG3857\": morecantile.TileMatrixSet.model_validate(webmerc)})\n\n###############################################################################\n# OGC WMTS Endpoints\nwmts = OGCEndpointsFactory(\n    backend_dependency=BackendParams,\n    supported_tms=supported_tms,\n)\n\napp.include_router(wmts.router, tags=[\"Web Map Tile Service\"])\n</code></pre>"},{"location":"custom/application_with_multiple_stac_apis/","title":"Multiple STAC APIs","text":"<p>Goal: Support multiple STAC API endpoints </p> <p>requirements: titiler.stacapi</p> <pre><code>\"\"\"TiTiler+stacapi FastAPI application.\"\"\"\n\nfrom dataclasses import dataclass, field\nfrom typing import Annotated, Any, Literal\n\nimport jinja2\nimport pystac\nimport rasterio\nfrom fastapi import FastAPI, Path, Query\nfrom fastapi import __version__ as fastapi_version\nfrom fastapi.responses import ORJSONResponse\nfrom pydantic import __version__ as pydantic_version\nfrom rio_tiler import __version__ as rio_tiler_version\nfrom starlette import __version__ as starlette_version\nfrom starlette.middleware.cors import CORSMiddleware\nfrom starlette.requests import Request\nfrom starlette.templating import Jinja2Templates\n\nfrom titiler.core import __version__ as titiler_version\nfrom titiler.core.dependencies import AssetsBidxExprParams, DefaultDependency\nfrom titiler.core.errors import DEFAULT_STATUS_CODES, add_exception_handlers\nfrom titiler.core.factory import (\n    AlgorithmFactory,\n    ColorMapFactory,\n    MultiBaseTilerFactory,\n    TMSFactory,\n)\nfrom titiler.core.middleware import CacheControlMiddleware\nfrom titiler.core.models.OGC import Conformance, Landing\nfrom titiler.core.utils import accept_media_type, create_html_response, update_openapi\nfrom titiler.mosaic.errors import MOSAIC_STATUS_CODES\nfrom titiler.mosaic.factory import MosaicTilerFactory\nfrom titiler.stacapi import __version__ as titiler_stacapi_version\nfrom titiler.stacapi.backend import STACAPIBackend\nfrom titiler.stacapi.dependencies import (\n    APIParams,\n    CollectionSearch,\n    STACAPIExtensionParams,\n    get_stac_item,\n)\nfrom titiler.stacapi.enums import MediaType\nfrom titiler.stacapi.errors import STACAPI_STATUS_CODES\nfrom titiler.stacapi.reader import SimpleSTACReader, STACAPIReader\nfrom titiler.stacapi.settings import ApiSettings\n\nsettings = ApiSettings()\n\n# custom template directory\ntemplates_location: list[Any] = (\n    [jinja2.FileSystemLoader(settings.template_directory)]\n    if settings.template_directory\n    else []\n)\ntemplates_location.append(jinja2.PackageLoader(\"titiler.stacapi\", \"templates\"))\ntemplates_location.append(jinja2.PackageLoader(\"titiler.core\", \"templates\"))\n\njinja2_env = jinja2.Environment(\n    autoescape=jinja2.select_autoescape([\"html\", \"xml\"]),\n    loader=jinja2.ChoiceLoader(templates_location),\n)\ntemplates = Jinja2Templates(env=jinja2_env)\n\n# NOTE: STAC API CATALOGS\ncatalog = {\n    \"catalog1\": \"https://stac.eoapi.dev/\",\n    \"catalog2\": \"{url for catalog 2}\",\n}\n\n\n@dataclass(init=False)\nclass BackendParams(DefaultDependency):\n    \"\"\"backend parameters.\"\"\"\n\n    api_params: APIParams = field(init=False)\n\n    def __init__(\n        self,\n        request: Request,\n        catalog_id: Annotated[\n            Literal[\"catalog1\", \"catalog2\"],\n            Path(description=\"Catalog\"),\n        ],\n    ):\n        \"\"\"Initialize BackendParams\"\"\"\n        self.api_params = APIParams(\n            url=request.app.state.catalog[catalog_id],\n            # NOTE: you can add headers here\n        )\n\n\ndef ItemIdParams(\n    request: Request,\n    catalog_id: Annotated[\n        Literal[\"catalog1\", \"catalog2\"],\n        Path(description=\"Catalog\"),\n    ],\n    collection_id: Annotated[\n        str,\n        Path(description=\"STAC Collection Identifier\"),\n    ],\n    item_id: Annotated[str, Path(description=\"STAC Item Identifier\")],\n) -&gt; pystac.Item:\n    \"\"\"STAC Item dependency for the MultiBaseTilerFactory.\"\"\"\n    return get_stac_item(\n        request.app.state.catalog[catalog_id],\n        collection_id,\n        item_id,\n        # NOTE: you can add headers here\n        headers={},\n    )\n\n\napp = FastAPI(\n    title=settings.name,\n    openapi_url=\"/api\",\n    docs_url=\"/api.html\",\n    description=\"\"\"Connect titiler to STAC APIs.\"\"\",\n    version=titiler_stacapi_version,\n    root_path=settings.root_path,\n)\n\n# Fix OpenAPI response header for OGC Common compatibility\nupdate_openapi(app)\n\n# Create catalog store\napp.state.catalog = catalog\n\nadd_exception_handlers(app, DEFAULT_STATUS_CODES)\nadd_exception_handlers(app, STACAPI_STATUS_CODES)\nadd_exception_handlers(app, MOSAIC_STATUS_CODES)\n\n# Set all CORS enabled origins\nif settings.cors_origins:\n    app.add_middleware(\n        CORSMiddleware,\n        allow_origins=settings.cors_origins,\n        allow_credentials=True,\n        allow_methods=[\"GET\"],\n        allow_headers=[\"*\"],\n    )\n\napp.add_middleware(CacheControlMiddleware, cachecontrol=settings.cachecontrol)\n\nAPP_CONFORMS_TO = {\n    \"http://www.opengis.net/spec/ogcapi-common-1/1.0/conf/core\",\n    \"http://www.opengis.net/spec/ogcapi-common-1/1.0/conf/landing-page\",\n    \"http://www.opengis.net/spec/ogcapi-common-1/1.0/conf/oas30\",\n    \"http://www.opengis.net/spec/ogcapi-common-1/1.0/conf/html\",\n    \"http://www.opengis.net/spec/ogcapi-common-1/1.0/conf/json\",\n}\n\n###############################################################################\n# STAC COLLECTION Endpoints\ncollection = MosaicTilerFactory(\n    path_dependency=CollectionSearch,\n    backend=STACAPIBackend,\n    backend_dependency=BackendParams,\n    dataset_reader=SimpleSTACReader,\n    assets_accessor_dependency=STACAPIExtensionParams,\n    optional_headers=[],\n    layer_dependency=AssetsBidxExprParams,\n    router_prefix=\"/catalogs/{catalog_id}/collections/{collection_id}\",\n    add_viewer=True,\n    templates=templates,\n)\napp.include_router(\n    collection.router,\n    tags=[\"STAC Collection\"],\n    prefix=\"/catalogs/{catalog_id}/collections/{collection_id}\",\n)\nAPP_CONFORMS_TO.update(collection.conforms_to)\n\n###############################################################################\n# STAC Item Endpoints\nstac = MultiBaseTilerFactory(\n    reader=STACAPIReader,\n    path_dependency=ItemIdParams,\n    router_prefix=\"/catalogs/{catalog_id}/collections/{collection_id}/items/{item_id}\",\n    add_viewer=True,\n    templates=templates,\n)\napp.include_router(\n    stac.router,\n    tags=[\"STAC Item\"],\n    prefix=\"/catalogs/{catalog_id}/collections/{collection_id}/items/{item_id}\",\n)\nAPP_CONFORMS_TO.update(stac.conforms_to)\n\n\n###############################################################################\n# Tiling Schemes Endpoints\ntms = TMSFactory(templates=templates)\napp.include_router(tms.router, tags=[\"OGC TileMatrix Schemes\"])\nAPP_CONFORMS_TO.update(tms.conforms_to)\n\n###############################################################################\n# Algorithms Endpoints\nalgorithms = AlgorithmFactory(templates=templates)\napp.include_router(algorithms.router, tags=[\"Algorithms\"])\nAPP_CONFORMS_TO.update(algorithms.conforms_to)\n\n###############################################################################\n# Colormaps endpoints\ncmaps = ColorMapFactory(templates=templates)\napp.include_router(cmaps.router, tags=[\"ColorMaps\"])\nAPP_CONFORMS_TO.update(cmaps.conforms_to)\n\n\n###############################################################################\n# Landing page\n@app.get(\n    \"/\",\n    response_model=Landing,\n    response_model_exclude_none=True,\n    response_class=ORJSONResponse,\n    responses={\n        200: {\n            \"content\": {\n                \"text/html\": {},\n                \"application/json\": {},\n            }\n        },\n    },\n    operation_id=\"getLandingPage\",\n    summary=\"landing page\",\n    tags=[\"Landing Page\"],\n)\ndef landing(\n    request: Request,\n    f: Annotated[\n        Literal[\"html\", \"json\"] | None,\n        Query(\n            description=\"Response MediaType. Defaults to endpoint's default or value defined in `accept` header.\"\n        ),\n    ] = None,\n):\n    \"\"\"The landing page provides links to the API definition, the conformance statements and to the feature collections in this dataset.\"\"\"\n    data = {\n        \"title\": \"TiTiler-STACAPI\",\n        \"description\": \"A modern dynamic tile server built on top of FastAPI and Rasterio/GDAL.\",\n        \"links\": [\n            {\n                \"title\": \"Landing page\",\n                \"href\": str(request.url_for(\"landing\")),\n                \"type\": \"text/html\",\n                \"rel\": \"self\",\n            },\n            {\n                \"title\": \"The API definition (JSON)\",\n                \"href\": str(request.url_for(\"openapi\")),\n                \"type\": \"application/vnd.oai.openapi+json;version=3.0\",\n                \"rel\": \"service-desc\",\n            },\n            {\n                \"title\": \"The API documentation\",\n                \"href\": str(request.url_for(\"swagger_ui_html\")),\n                \"type\": \"text/html\",\n                \"rel\": \"service-doc\",\n            },\n            {\n                \"title\": \"Conformance Declaration\",\n                \"href\": str(request.url_for(\"conformance\")),\n                \"type\": \"text/html\",\n                \"rel\": \"http://www.opengis.net/def/rel/ogc/1.0/conformance\",\n            },\n            {\n                \"title\": \"List of Available TileMatrixSets\",\n                \"href\": str(request.url_for(\"tilematrixsets\")),\n                \"type\": \"application/json\",\n                \"rel\": \"http://www.opengis.net/def/rel/ogc/1.0/tiling-schemes\",\n            },\n            {\n                \"title\": \"List of Available Algorithms\",\n                \"href\": str(request.url_for(\"available_algorithms\")),\n                \"type\": \"application/json\",\n                \"rel\": \"data\",\n            },\n            {\n                \"title\": \"List of Available ColorMaps\",\n                \"href\": str(request.url_for(\"available_colormaps\")),\n                \"type\": \"application/json\",\n                \"rel\": \"data\",\n            },\n            {\n                \"title\": \"TiTiler-STACAPI Documentation (external link)\",\n                \"href\": \"https://developmentseed.org/titiler-stacapi/\",\n                \"type\": \"text/html\",\n                \"rel\": \"doc\",\n            },\n            {\n                \"title\": \"TiTiler-STACAPI source code (external link)\",\n                \"href\": \"https://github.com/developmentseed/titiler-stacapi\",\n                \"type\": \"text/html\",\n                \"rel\": \"doc\",\n            },\n        ],\n    }\n\n    if f:\n        output_type = MediaType[f]\n    else:\n        accepted_media = [MediaType.html, MediaType.json]\n        output_type = (\n            accept_media_type(request.headers.get(\"accept\", \"\"), accepted_media)\n            or MediaType.json\n        )\n\n    if output_type == MediaType.html:\n        return create_html_response(\n            request,\n            data,\n            title=\"TiTiler-STACAPI\",\n            template_name=\"landing\",\n            templates=templates,\n        )\n\n    return data\n\n\n@app.get(\n    \"/conformance\",\n    response_model=Conformance,\n    response_model_exclude_none=True,\n    responses={\n        200: {\n            \"content\": {\n                \"text/html\": {},\n                \"application/json\": {},\n            }\n        },\n    },\n    tags=[\"OGC Common\"],\n)\ndef conformance(\n    request: Request,\n    f: Annotated[\n        Literal[\"html\", \"json\"] | None,\n        Query(\n            description=\"Response MediaType. Defaults to endpoint's default or value defined in `accept` header.\"\n        ),\n    ] = None,\n):\n    \"\"\"Conformance classes.\n\n    Called with `GET /conformance`.\n\n    Returns:\n        Conformance classes which the server conforms to.\n\n    \"\"\"\n    data = {\"conformsTo\": sorted(APP_CONFORMS_TO)}\n\n    if f:\n        output_type = MediaType[f]\n    else:\n        accepted_media = [MediaType.html, MediaType.json]\n        output_type = (\n            accept_media_type(request.headers.get(\"accept\", \"\"), accepted_media)\n            or MediaType.json\n        )\n\n    if output_type == MediaType.html:\n        return create_html_response(\n            request,\n            data,\n            \"conformance\",\n            title=\"Conformance\",\n            templates=templates,\n        )\n\n    return data\n\n\n###############################################################################\n# Health Check Endpoint\n@app.get(\"/healthz\", description=\"Health Check\", tags=[\"Health Check\"])\ndef ping(request: Request) -&gt; dict:\n    \"\"\"Health check.\"\"\"\n    data = {\n        \"versions\": {\n            \"titiler\": titiler_version,\n            \"titiler.stacapi\": titiler_stacapi_version,\n            \"rasterio\": rasterio.__version__,\n            \"rio-tiler\": rio_tiler_version,\n            \"gdal\": rasterio.__gdal_version__,\n            \"proj\": rasterio.__proj_version__,\n            \"fastapi\": fastapi_version,\n            \"starlette\": starlette_version,\n            \"pydantic\": pydantic_version,\n        },\n    }\n\n    if settings.debug:\n        data[\"catalog\"] = request.app.state.catalog\n\n    return data\n</code></pre>"},{"location":"endpoints/","title":"Endpoints","text":"<p>By default the main application (<code>titiler.pgstac.main.app</code>) provides three sets of endpoints:</p> <ul> <li>Collections: Dynamic mosaic tiler based on STAC Collection</li> <li>Items: Dynamic tiler for single STAC item (stored in PgSTAC)</li> <li>TileMatrixSet: Available TileMatrixSets for the service</li> </ul>"},{"location":"endpoints/collections_endpoints/","title":"STAC Collections","text":""},{"location":"endpoints/collections_endpoints/#stac-collections-endpoints","title":"STAC Collections endpoints","text":"Method URL Output Description <code>GET</code> <code>/collections/{collection_id}/info</code> JSON return mosaic's basic info <code>GET</code> <code>/collections/{collection_id}/info.geojson</code> GeoJSON return mosaic's basic info as a GeoJSON feature <code>GET</code> <code>/collections/{collection_id}/tiles</code> JSON List of OGC Tilesets available <code>GET</code> <code>/collections/{collection_id}/tiles/{tileMatrixSetId}</code> JSON OGC Tileset metadata <code>GET</code> <code>/collections/{collection_id}/tiles/{TileMatrixSetId}/{z}/{x}/{y}[@{scale}x][.{format}]</code> image/bin Create a web map tile image for a collection and a tile index <code>GET</code> <code>/collections/{collection_id}/{TileMatrixSetId}/tilejson.json</code> JSON (TileJSON) Return a Mapbox TileJSON document <code>GET</code> <code>/collections/{collection_id}/{TileMatrixSetId}/map.html</code> HTML simple map viewer <code>GET</code> <code>/collections/{collection_id}/point/{lon},{lat}</code> JSON return pixel value from a mosaic assets <code>GET</code> <code>/collections/{collection_id}/bbox/{minx},{miny},{maxx},{maxy}/assets</code> JSON return list of assets intersecting a bounding box <code>GET</code> <code>/collections/{collection_id}/point/{lon},{lat}/assets</code> JSON return list of assets intersecting a point <code>GET</code> <code>/collections/{collection_id}/tiles/{tileMatrixSetId}/{z}/{x}/{y}/assets</code> JSON return list of assets intersecting a XYZ tile"},{"location":"endpoints/collections_endpoints/#tiles","title":"Tiles","text":"<p><code>:endpoint:/collections/{collection_id}/tiles/{TileMatrixSetId}/{z}/{x}/{y}[@{scale}x][.{format}]</code></p> <ul> <li> <p>PathParams:</p> <ul> <li>collection_id: STAC Collection Identifier.</li> <li>TileMatrixSetId: TileMatrixSet name (e.g <code>WebMercatorQuad</code>).</li> <li>z: Tile's zoom level.</li> <li>x: Tile's column.</li> <li>y: Tile's row.</li> <li>scale: Tile size scale, default is set to 1 (256x256). OPTIONAL</li> <li>format: Output image format, default is set to None and will be either JPEG or PNG depending on masked value. OPTIONAL</li> </ul> </li> <li> <p>QueryParams:</p> <ul> <li>assets (array[str]): asset names.</li> <li>expression (str): rio-tiler's math expression with asset names (e.g <code>Asset1_b1/Asset2_b1</code>).</li> <li>asset_as_band (bool): tell rio-tiler that each asset is a 1 band dataset, so expression <code>Asset1/Asset2</code> can be passed.</li> <li>asset_bidx (array[str]): Per asset band index (e.g <code>Asset1|1;2;3</code>).</li> <li>nodata: Overwrite internal Nodata value. OPTIONAL</li> <li>unscale (bool): Apply dataset internal Scale/Offset.</li> <li>resampling (str): RasterIO resampling algorithm. Defaults to <code>nearest</code>.</li> <li>reproject (str): WarpKernel resampling algorithm (only used when doing re-projection). Defaults to <code>nearest</code>.</li> <li>algorithm (str): Custom algorithm name (e.g <code>hillshade</code>).</li> <li>algorithm_params (str): JSON encoded algorithm parameters.</li> <li>rescale (array[str]): Comma (',') delimited Min,Max range (e.g <code>rescale=0,1000</code>, <code>rescale=0,1000&amp;rescale=0,3000&amp;rescale=0,2000</code>).</li> <li>color_formula (str): rio-color formula.</li> <li>colormap (str): JSON encoded custom Colormap.</li> <li>colormap_name (str): rio-tiler color map name.</li> <li>return_mask (bool): Add mask to the output data. Default is True.</li> <li>buffer (float): Buffer on each side of the given tile. It must be a multiple of <code>0.5</code>. Output tilesize will be expanded to <code>tilesize + 2 * buffer</code> (e.g 0.5 = 257x257, 1.0 = 258x258).</li> <li>padding (int): Padding to apply to each tile edge. Helps reduce resampling artefacts along edges. Defaults to <code>0</code></li> <li>pixel_selection (str): Pixel selection method (cogeotiff.github.io/rio-tiler/mosaic/).</li> </ul> </li> <li> <p>STAC API Search QueryParams:</p> <ul> <li>ids (str): Comma (',') delimited list of IDS.</li> <li>bbox (str): Comma (',') delimited BoundingBox (not used in the search query, but usefull to limit the bbox of the mosaic).</li> <li>datetime (str): Datetime filter for the Search Query following <code>RFC 3339</code> format (github.com/radiantearth/stac-api-spec/blob/v1.0.0/implementation.md#datetime-parameter-handling)</li> <li>filter (str): A CQL2 filter expression for filtering items.</li> <li>filter-lang (str): CQL2 Language (cql2-text, cql2-json). Defaults to cql2-text.</li> <li>sortby (str): An array of property names, prefixed by either '+' for ascending or '-' for descending. If no prefix is provided, '+' is assumed.</li> <li>limit (int): The maximum number of results to return (page size). Defaults to 10.</li> <li>max_items (int): The maximum number of items to used in a mosaic. Defaults to 100.</li> </ul> </li> </ul> <p>Important</p> <p>assets OR expression is required</p> <p>Example:</p> <ul> <li><code>https://myendpoint/collections/my-collection/tiles/WebMercatorQuad/1/2/3?assets=B01</code></li> <li><code>https://myendpoint/collections/my-collection/tiles/WebMercatorQuad/1/2/3.jpg?assets=B01</code></li> <li><code>https://myendpoint/collections/my-collection/tiles/WorldCRS84Quad/1/2/3@2x.png?assets=B01&amp;assets=B02&amp;assets=B03</code></li> <li><code>https://myendpoint/collections/my-collection/tiles/WorldCRS84Quad/1/2/3?assets=B01&amp;rescale=0,1000&amp;colormap_name=cfastie</code></li> </ul>"},{"location":"endpoints/collections_endpoints/#tilesjson","title":"TilesJSON","text":"<p><code>:endpoint:/collections/{collection_id}[/{TileMatrixSetId}]/tilejson.json</code></p> <ul> <li> <p>PathParams:</p> <ul> <li>collection_id: STAC Collection Identifier.</li> <li>TileMatrixSetId: TileMatrixSet name (e.g <code>WebMercatorQuad</code>).</li> </ul> </li> <li> <p>QueryParams:</p> <ul> <li>tile_format: Output image format, default is set to None and will be either JPEG or PNG depending on masked value.</li> <li>tile_scale: Tile size scale, default is set to 1 (256x256). OPTIONAL</li> <li>minzoom: Overwrite default minzoom. OPTIONAL</li> <li>maxzoom: Overwrite default maxzoom. OPTIONAL</li> <li>expression (str): rio-tiler's math expression with asset names (e.g <code>Asset1_b1/Asset2_b1</code>).</li> <li>asset_as_band (bool): tell rio-tiler that each asset is a 1 band dataset, so expression <code>Asset1/Asset2</code> can be passed.</li> <li>asset_bidx (array[str]): Per asset band index (e.g <code>Asset1|1;2;3</code>).</li> <li>nodata (str, int, float): Overwrite internal Nodata value.</li> <li>unscale (bool): Apply dataset internal Scale/Offset.</li> <li>resampling (str): RasterIO resampling algorithm. Defaults to <code>nearest</code>.</li> <li>reproject (str): WarpKernel resampling algorithm (only used when doing re-projection). Defaults to <code>nearest</code>.</li> <li>algorithm (str): Custom algorithm name (e.g <code>hillshade</code>).</li> <li>algorithm_params (str): JSON encoded algorithm parameters.</li> <li>rescale (array[str]): Comma (',') delimited Min,Max range (e.g <code>rescale=0,1000</code>, <code>rescale=0,1000&amp;rescale=0,3000&amp;rescale=0,2000</code>).</li> <li>color_formula (str): rio-color formula.</li> <li>colormap (str): JSON encoded custom Colormap.</li> <li>colormap_name (str): rio-tiler color map name.</li> <li>return_mask (bool): Add mask to the output data. Default is True.</li> <li>buffer (float): Buffer on each side of the given tile. It must be a multiple of <code>0.5</code>. Output tilesize will be expanded to <code>tilesize + 2 * buffer</code> (e.g 0.5 = 257x257, 1.0 = 258x258).</li> <li>padding (int): Padding to apply to each tile edge. Helps reduce resampling artefacts along edges. Defaults to <code>0</code></li> <li>pixel_selection (str): Pixel selection method (cogeotiff.github.io/rio-tiler/mosaic/).</li> </ul> </li> <li> <p>STAC API Search QueryParams:</p> <ul> <li>ids (str): Comma (',') delimited list of IDS.</li> <li>bbox (str): Comma (',') delimited BoundingBox (not used in the search query, but usefull to limit the bbox of the mosaic).</li> <li>datetime (str): Datetime filter for the Search Query following <code>RFC 3339</code> format (github.com/radiantearth/stac-api-spec/blob/v1.0.0/implementation.md#datetime-parameter-handling)</li> <li>filter (str): A CQL2 filter expression for filtering items.</li> <li>filter-lang (str): CQL2 Language (cql2-text, cql2-json). Defaults to cql2-text.</li> <li>sortby (str): An array of property names, prefixed by either '+' for ascending or '-' for descending. If no prefix is provided, '+' is assumed.</li> <li>limit (int): The maximum number of results to return (page size). Defaults to 10.</li> <li>max_items (int): The maximum number of items to used in a mosaic. Defaults to 100.</li> </ul> </li> </ul> <p>Important</p> <p>assets OR expression is required</p> <p>Example:</p> <ul> <li><code>https://myendpoint/collections/my-collection/WebMercatorQuad/tilejson.json?assets=B01</code></li> <li><code>https://myendpoint/collections/my-collection/WebMercatorQuad/tilejson.json?assets=B01&amp;tile_format=png</code></li> <li><code>https://myendpoint/collections/my-collection/WorldCRS84Quad/tilejson.json?assets=B01&amp;tile_scale=2</code></li> </ul>"},{"location":"endpoints/items_endpoints/","title":"STAC Items","text":""},{"location":"endpoints/items_endpoints/#stac-items-endpoints","title":"STAC Items endpoints","text":"<p>The <code>Item</code> endpoints are created using TiTiler's MultiBaseTilerFactory</p> Method URL Output Description <code>GET</code> <code>/collections/{collection_id}/items/{item_id}/info</code> JSON (Info) return assets basic info <code>GET</code> <code>/collections/{collection_id}/items/{item_id}/info.geojson</code> GeoJSON (InfoGeoJSON) return assets basic info as a GeoJSON feature <code>GET</code> <code>/collections/{collection_id}/items/{item_id}/assets</code> JSON return the list of available assets <code>GET</code> <code>/collections/{collection_id}/items/{item_id}/asset_statistics</code> JSON (Statistics) return per asset statistics <code>GET</code> <code>/collections/{collection_id}/items/{item_id}/statistics</code> JSON (Statistics) return assets statistics (merged) <code>POST</code> <code>/collections/{collection_id}/items/{item_id}/statistics</code> GeoJSON (Statistics) return assets statistics for a GeoJSON (merged) <code>GET</code> <code>/collections/{collection_id}/items/{item_id}/tiles</code> JSON List of OGC Tilesets available <code>GET</code> <code>/collections/{collection_id}/items/{item_id}/tiles/{tileMatrixSetId}</code> JSON OGC Tileset metadata <code>GET</code> <code>/collections/{collection_id}/items/{item_id}/tiles[/{TileMatrixSetId}]/{z}/{x}/{y}[@{scale}x][.{format}]</code> image/bin create a web map tile image from assets <code>GET</code> <code>/collections/{collection_id}/items/{item_id}[/{TileMatrixSetId}]/tilejson.json</code> JSON (TileJSON) return a Mapbox TileJSON document <code>GET</code> <code>/collections/{collection_id}/items/{item_id}[/{TileMatrixSetId}]/map.html</code> HTML simple map viewer <code>GET</code> <code>/collections/{collection_id}/items/{item_id}/point/{lon},{lat}</code> JSON (Point) return pixel values from assets <code>GET</code> <code>/collections/{collection_id}/items/{item_id}/preview[.{format}]</code> image/bin create a preview image from assets <code>GET</code> <code>/collections/{collection_id}/items/{item_id}/bbox/{minx},{miny},{maxx},{maxy}[/{width}x{height}].{format}</code> image/bin create an image from part of assets <code>POST</code> <code>/collections/{collection_id}/items/{item_id}/feature[/{width}x{height}][.{format}]</code> image/bin create an image from a geojson feature intersecting assets"},{"location":"endpoints/items_endpoints/#tiles","title":"Tiles","text":"<p><code>:endpoint:/collections/{collection_id}/items/{item_id}/tiles[/{TileMatrixSetId}]/{z}/{x}/{y}[@{scale}x][.{format}]</code></p> <ul> <li> <p>PathParams:</p> <ul> <li>collection_id (str): STAC Collection Identifier.</li> <li>item_id (str): STAC Item Identifier.</li> <li>TileMatrixSetId (str): TileMatrixSet name, default is <code>WebMercatorQuad</code>. Optional</li> <li>z (int): TMS tile's zoom level.</li> <li>x (int): TMS tile's column.</li> <li>y (int): TMS tile's row.</li> <li>scale (int): Tile size scale, default is set to 1 (256x256). Optional</li> <li>format (str): Output image format, default is set to None and will be either JPEG or PNG depending on masked value. Optional</li> </ul> </li> <li> <p>QueryParams:</p> <ul> <li>assets (array[str]): asset names.</li> <li>expression (str): rio-tiler's math expression with asset names (e.g <code>Asset1_b1/Asset2_b1</code>).</li> <li>asset_as_band (bool): tell rio-tiler that each asset is a 1 band dataset, so expression <code>Asset1/Asset2</code> can be passed.</li> <li>asset_bidx (array[str]): Per asset band math expression (e.g <code>Asset1|1;2;3</code>).</li> <li>nodata (str, int, float): Overwrite internal Nodata value.</li> <li>unscale (bool): Apply dataset internal Scale/Offset.</li> <li>resampling (str): RasterIO resampling algorithm. Defaults to <code>nearest</code>.</li> <li>reproject (str): WarpKernel resampling algorithm (only used when doing re-projection). Defaults to <code>nearest</code>.</li> <li>algorithm (str): Custom algorithm name (e.g <code>hillshade</code>).</li> <li>algorithm_params (str): JSON encoded algorithm parameters.</li> <li>rescale (array[str]): Comma (',') delimited Min,Max range (e.g <code>rescale=0,1000</code>, <code>rescale=0,1000&amp;rescale=0,3000&amp;rescale=0,2000</code>).</li> <li>color_formula (str): rio-color formula.</li> <li>colormap (str): JSON encoded custom Colormap.</li> <li>colormap_name (str): rio-tiler color map name.</li> <li>return_mask (bool): Add mask to the output data. Default is True.</li> <li>buffer (float): Buffer on each side of the given tile. It must be a multiple of <code>0.5</code>. Output tilesize will be expanded to <code>tilesize + 2 * buffer</code> (e.g 0.5 = 257x257, 1.0 = 258x258).</li> <li>padding (int): Padding to apply to each tile edge. Helps reduce resampling artefacts along edges. Defaults to <code>0</code></li> <li>algorithm (str): Custom algorithm name (e.g <code>hillshade</code>).</li> <li>algorithm_params (str): JSON encoded algorithm parameters.</li> </ul> </li> </ul> <p>Important</p> <p>assets OR expression is required</p> <p>Example:</p> <ul> <li><code>https://myendpoint/collections/mycollection/items/oneitem/tiles/1/2/3?assets=B01&amp;assets=B00</code></li> <li><code>https://myendpoint/collections/mycollection/items/oneitem/tiles/1/2/3.jpg?assets=B01</code></li> <li><code>https://myendpoint/collections/mycollection/items/oneitem/tiles/WorldCRS84Quad/1/2/3@2x.png?assets=B01</code></li> <li><code>https://myendpoint/collections/mycollection/items/oneitem/tiles/WorldCRS84Quad/1/2/3?expression=B01/B02&amp;rescale=0,1000&amp;colormap_name=cfastie&amp;asset_as_band=True</code></li> </ul>"},{"location":"endpoints/items_endpoints/#preview","title":"Preview","text":"<p><code>:endpoint:/collections/{collection_id}/items/{item_id}/preview[.{format}]</code></p> <ul> <li> <p>PathParams:</p> <ul> <li>collection_id (str): STAC Collection Identifier.</li> <li>item_id (str): STAC Item Identifier.</li> <li>format: Output image format, default is set to None and will be either JPEG or PNG depending on masked value. Optional</li> </ul> </li> <li> <p>QueryParams:</p> <ul> <li>assets (array[str]): asset names.</li> <li>expression (str): rio-tiler's math expression with asset names (e.g <code>Asset1_b1/Asset2_b1</code>).</li> <li>asset_as_band (bool): tell rio-tiler that each asset is a 1 band dataset, so expression <code>Asset1/Asset2</code> can be passed.</li> <li>asset_bidx (array[str]): Per asset band math expression (e.g <code>Asset1|1;2;3</code>).</li> <li>max_size (int): Max image size, default is 1024.</li> <li>height (int): Force output image height.</li> <li>width (int): Force output image width.</li> <li>dst_crs (str): Output Coordinate Reference System. Default to dataset's CRS.</li> <li>nodata (str, int, float): Overwrite internal Nodata value.</li> <li>unscale (bool): Apply dataset internal Scale/Offset.</li> <li>algorithm (str): Custom algorithm name (e.g <code>hillshade</code>).</li> <li>algorithm_params (str): JSON encoded algorithm parameters.</li> <li>resampling (str): RasterIO resampling algorithm. Defaults to <code>nearest</code>.</li> <li>reproject (str): WarpKernel resampling algorithm (only used when doing re-projection). Defaults to <code>nearest</code>.</li> <li>rescale (array[str]): Comma (',') delimited Min,Max range (e.g <code>rescale=0,1000</code>, <code>rescale=0,1000&amp;rescale=0,3000&amp;rescale=0,2000</code>).</li> <li>color_formula (str): rio-color formula.</li> <li>colormap (str): JSON encoded custom Colormap.</li> <li>colormap_name (str): rio-tiler color map name.</li> <li>return_mask (bool): Add mask to the output data. Default is True.</li> <li>algorithm (str): Custom algorithm name (e.g <code>hillshade</code>).</li> <li>algorithm_params (str): JSON encoded algorithm parameters.</li> </ul> </li> </ul> <p>Important</p> <ul> <li> <p>assets OR expression is required</p> </li> <li> <p>if height and width are provided max_size will be ignored.</p> </li> </ul> <p>Example:</p> <ul> <li><code>https://myendpoint/collections/mycollection/items/oneitem/preview?assets=B01</code></li> <li><code>https://myendpoint/collections/mycollection/items/oneitem/preview.jpg?assets=B01</code></li> <li><code>https://myendpoint/collections/mycollection/items/oneitem/preview?assets=B01&amp;rescale=0,1000&amp;colormap_name=cfastie</code></li> </ul>"},{"location":"endpoints/items_endpoints/#bboxfeature","title":"BBOX/Feature","text":"<p><code>:endpoint:/collections/{collection_id}/items/{item_id}/bbox/{minx},{miny},{maxx},{maxy}.{format}</code> <code>:endpoint:/collections/{collection_id}/items/{item_id}/bbox/{minx},{miny},{maxx},{maxy}/{width}x{height}.{format}</code></p> <ul> <li> <p>PathParams:</p> <ul> <li>collection_id (str): STAC Collection Identifier.</li> <li>item_id (str): STAC Item Identifier.</li> <li>minx,miny,maxx,maxy (str): Comma (',') delimited bounding box in WGS84.</li> <li>height (int): Force output image height. Optional</li> <li>width (int): Force output image width. Optional</li> <li>format (str): Output image format, default is set to None and will be either JPEG or PNG depending on masked value. Optional</li> </ul> </li> <li> <p>QueryParams:</p> <ul> <li>assets (array[str]): asset names.</li> <li>expression (str): rio-tiler's math expression with asset names (e.g <code>Asset1_b1/Asset2_b1</code>).</li> <li>asset_as_band (bool): tell rio-tiler that each asset is a 1 band dataset, so expression <code>Asset1/Asset2</code> can be passed.</li> <li>asset_bidx (array[str]): Per asset band math expression (e.g <code>Asset1|1;2;3</code>).</li> <li>max_size (int): Max image size.</li> <li>coord_crs (str): Coordinate Reference System of the input coordinates. Default to <code>epsg:4326</code>.</li> <li>dst_crs (str): Output Coordinate Reference System. Default to <code>coord_crs</code>.</li> <li>nodata (str, int, float): Overwrite internal Nodata value.</li> <li>unscale (bool): Apply dataset internal Scale/Offset.</li> <li>algorithm (str): Custom algorithm name (e.g <code>hillshade</code>).</li> <li>algorithm_params (str): JSON encoded algorithm parameters.</li> <li>resampling (str): RasterIO resampling algorithm. Defaults to <code>nearest</code>.</li> <li>reproject (str): WarpKernel resampling algorithm (only used when doing re-projection). Defaults to <code>nearest</code>.</li> <li>rescale (array[str]): Comma (',') delimited Min,Max range (e.g <code>rescale=0,1000</code>, <code>rescale=0,1000&amp;rescale=0,3000&amp;rescale=0,2000</code>).</li> <li>color_formula (str): rio-color formula.</li> <li>colormap (str): JSON encoded custom Colormap.</li> <li>colormap_name (str): rio-tiler color map name.</li> <li>return_mask (bool): Add mask to the output data. Default is True.</li> <li>algorithm (str): Custom algorithm name (e.g <code>hillshade</code>).</li> <li>algorithm_params (str): JSON encoded algorithm parameters.</li> </ul> </li> </ul> <p>Important</p> <ul> <li> <p>assets OR expression is required</p> </li> <li> <p>if height and width are provided max_size will be ignored.</p> </li> </ul> <p>Example:</p> <ul> <li><code>https://myendpoint/collections/mycollection/items/oneitem/bbox/0,0,10,10.png?assets=B01</code></li> <li><code>https://myendpoint/collections/mycollection/items/oneitem/bbox/0,0,10,10.png?assets=B01&amp;rescale=0,1000&amp;colormap_name=cfastie</code></li> </ul> <p><code>:endpoint:/collections/{collection_id}/items/{item_id}/feature[/{width}x{height}][].{format}] - [POST]</code></p> <ul> <li> <p>Body:</p> <ul> <li>feature (JSON): A valid GeoJSON feature (Polygon or MultiPolygon)</li> </ul> </li> <li> <p>PathParams:</p> <ul> <li>collection_id (str): STAC Collection Identifier.</li> <li>item_id (str): STAC Item Identifier.</li> <li>height (int): Force output image height. Optional</li> <li>width (int): Force output image width. Optional</li> <li>format (str): Output image format, default is set to None and will be either JPEG or PNG depending on masked value. Optional</li> </ul> </li> <li> <p>QueryParams:</p> <ul> <li>assets (array[str]): asset names.</li> <li>expression (str): rio-tiler's math expression with asset names (e.g <code>Asset1_b1/Asset2_b1</code>).</li> <li>asset_as_band (bool): tell rio-tiler that each asset is a 1 band dataset, so expression <code>Asset1/Asset2</code> can be passed.</li> <li>asset_bidx (array[str]): Per asset band math expression (e.g <code>Asset1|1;2;3</code>).</li> <li>max_size (int): Max image size.</li> <li>coord_crs (str): Coordinate Reference System of the input coordinates. Default to <code>epsg:4326</code>.</li> <li>dst_crs (str): Output Coordinate Reference System. Default to <code>coord_crs</code>.</li> <li>nodata (str, int, float): Overwrite internal Nodata value.</li> <li>unscale (bool): Apply dataset internal Scale/Offset.</li> <li>resampling (str): RasterIO resampling algorithm. Defaults to <code>nearest</code>.</li> <li>reproject (str): WarpKernel resampling algorithm (only used when doing re-projection). Defaults to <code>nearest</code>.</li> <li>algorithm (str): Custom algorithm name (e.g <code>hillshade</code>).</li> <li>algorithm_params (str): JSON encoded algorithm parameters.</li> <li>rescale (array[str]): Comma (',') delimited Min,Max range (e.g <code>rescale=0,1000</code>, <code>rescale=0,1000&amp;rescale=0,3000&amp;rescale=0,2000</code>).</li> <li>color_formula (str): rio-color formula.</li> <li>colormap (str): JSON encoded custom Colormap.</li> <li>colormap_name (str): rio-tiler color map name.</li> <li>return_mask (bool): Add mask to the output data. Default is True.</li> <li>algorithm (str): Custom algorithm name (e.g <code>hillshade</code>).</li> <li>algorithm_params (str): JSON encoded algorithm parameters.</li> </ul> </li> </ul> <p>Important</p> <ul> <li> <p>assets OR expression is required</p> </li> <li> <p>if height and width are provided max_size will be ignored.</p> </li> </ul> <p>Example:</p> <ul> <li><code>https://myendpoint/collections/mycollection/items/oneitem/crop?assets=B01</code></li> <li><code>https://myendpoint/collections/mycollection/items/oneitem/crop.png?assets=B01</code></li> <li><code>https://myendpoint/collections/mycollection/items/oneitem/100x100.png?assets=B01&amp;rescale=0,1000&amp;colormap_name=cfastie</code></li> </ul>"},{"location":"endpoints/items_endpoints/#point","title":"Point","text":"<p><code>:endpoint:/collections/{collection_id}/items/{item_id}/point/{lon},{lat}</code></p> <ul> <li> <p>PathParams:</p> <ul> <li>collection_id (str): STAC Collection Identifier.</li> <li>item_id (str): STAC Item Identifier.</li> <li>lon,lat, (str): Comma (',') delimited point Longitude and Latitude WGS84.</li> </ul> </li> <li> <p>QueryParams:</p> <ul> <li>assets (array[str]): asset names.</li> <li>expression (str): rio-tiler's math expression with asset names (e.g <code>Asset1_b1/Asset2_b1</code>).</li> <li>asset_as_band (bool): tell rio-tiler that each asset is a 1 band dataset, so expression <code>Asset1/Asset2</code> can be passed.</li> <li>asset_bidx (array[str]): Per asset band math expression (e.g <code>Asset1|1;2;3</code>).</li> <li>nodata (str, int, float): Overwrite internal Nodata value.</li> <li>unscale (bool): Apply dataset internal Scale/Offset.</li> <li>resampling (str): RasterIO resampling algorithm. Defaults to <code>nearest</code>.</li> <li>reproject (str): WarpKernel resampling algorithm (only used when doing re-projection). Defaults to <code>nearest</code>.</li> </ul> </li> </ul> <p>Important</p> <p>assets OR expression is required</p> <p>Example:</p> <ul> <li><code>https://myendpoint/collections/mycollection/items/oneitem/point/0,0?assets=B01</code></li> </ul>"},{"location":"endpoints/items_endpoints/#tilesjson","title":"TilesJSON","text":"<p><code>:endpoint:/collections/{collection_id}/items/{item_id}[/{TileMatrixSetId}]/tilejson.json</code> tileJSON document</p> <ul> <li> <p>PathParams:</p> <ul> <li>collection_id (str): STAC Collection Identifier.</li> <li>item_id (str): STAC Item Identifier.</li> <li>TileMatrixSetId: TileMatrixSet name, default is <code>WebMercatorQuad</code>.</li> </ul> </li> <li> <p>QueryParams:</p> <ul> <li>assets (array[str]): asset names.</li> <li>expression (str): rio-tiler's math expression with asset names (e.g <code>Asset1_b1/Asset2_b1</code>).</li> <li>asset_as_band (bool): tell rio-tiler that each asset is a 1 band dataset, so expression <code>Asset1/Asset2</code> can be passed.</li> <li>asset_bidx (array[str]): Per asset band math expression (e.g <code>Asset1|1;2;3</code>).</li> <li>tile_format (str): Output image format, default is set to None and will be either JPEG or PNG depending on masked value.</li> <li>tile_scale (int): Tile size scale, default is set to 1 (256x256).</li> <li>minzoom (int): Overwrite default minzoom.</li> <li>maxzoom (int): Overwrite default maxzoom.</li> <li>nodata (str, int, float): Overwrite internal Nodata value.</li> <li>unscale (bool): Apply dataset internal Scale/Offset.</li> <li>resampling (str): RasterIO resampling algorithm. Defaults to <code>nearest</code>.</li> <li>reproject (str): WarpKernel resampling algorithm (only used when doing re-projection). Defaults to <code>nearest</code>.</li> <li>algorithm (str): Custom algorithm name (e.g <code>hillshade</code>).</li> <li>algorithm_params (str): JSON encoded algorithm parameters.</li> <li>rescale (array[str]): Comma (',') delimited Min,Max range (e.g <code>rescale=0,1000</code>, <code>rescale=0,1000&amp;rescale=0,3000&amp;rescale=0,2000</code>).</li> <li>color_formula (str): rio-color formula.</li> <li>colormap (str): JSON encoded custom Colormap.</li> <li>colormap_name (str): rio-tiler color map name.</li> <li>return_mask (bool): Add mask to the output data. Default is True.</li> <li>buffer (float): Buffer on each side of the given tile. It must be a multiple of <code>0.5</code>. Output tilesize will be expanded to <code>tilesize + 2 * buffer</code> (e.g 0.5 = 257x257, 1.0 = 258x258).</li> <li>padding (int): Padding to apply to each tile edge. Helps reduce resampling artefacts along edges. Defaults to <code>0</code></li> </ul> </li> </ul> <p>Important</p> <p>assets OR expression is required</p> <p>Example:</p> <ul> <li><code>https://myendpoint/collections/mycollection/items/oneitem/tilejson.json?assets=B01</code></li> <li><code>https://myendpoint/collections/mycollection/items/oneitem/tilejson.json?assets=B01&amp;tile_format=png</code></li> <li><code>https://myendpoint/collections/mycollection/items/oneitem/WorldCRS84Quad/tilejson.json?tile_scale=2&amp;expression=B01/B02&amp;asset_as_band=True</code></li> </ul>"},{"location":"endpoints/items_endpoints/#info","title":"Info","text":"<p><code>:endpoint:/collections/{collection_id}/items/{item_id}/info</code> - Return basic info on STAC item's COG.</p> <ul> <li> <p>PathParams:</p> <ul> <li>collection_id (str): STAC Collection Identifier.</li> <li>item_id (str): STAC Item Identifier.</li> </ul> </li> <li> <p>QueryParams:</p> <ul> <li>assets (array[str]): asset names. Default to all available assets.</li> </ul> </li> </ul> <p>Example:</p> <ul> <li><code>https://myendpoint/collections/mycollection/items/oneitem/info?assets=B01</code></li> </ul> <p><code>:endpoint:/collections/{collection_id}/items/{item_id}/info.geojson</code> - Return basic info on STAC item's COG as a GeoJSON feature</p> <ul> <li> <p>PathParams:</p> <ul> <li>collection_id (str): STAC Collection Identifier.</li> <li>item_id (str): STAC Item Identifier.</li> </ul> </li> <li> <p>QueryParams:</p> <ul> <li>collection (str): STAC Collection Identifier. Required</li> <li>item (str): STAC Item Identifier. Required</li> <li>assets (array[str]): asset names. Default to all available assets.</li> </ul> </li> </ul> <p>Example:</p> <ul> <li><code>https://myendpoint/collections/mycollection/items/oneitem/info.geojson?assets=B01</code></li> </ul> <p><code>:endpoint:/collections/{collection_id}/items/{item_id}/assets</code> - Return the list of available assets</p>"},{"location":"endpoints/items_endpoints/#available-assets","title":"Available Assets","text":"<p><code>:endpoint:/collections/{collection_id}/items/{item_id}/assets</code> - Return a list of available assets</p> <ul> <li>PathParams:<ul> <li>collection_id (str): STAC Collection Identifier.</li> <li>item_id (str): STAC Item Identifier.</li> </ul> </li> </ul> <p>Example:</p> <ul> <li><code>https://myendpoint/collections/mycollection/items/oneitem/assets</code></li> </ul>"},{"location":"endpoints/items_endpoints/#statistics","title":"Statistics","text":"<p><code>:endpoint:/collections/{collection_id}/items/{item_id}/asset_statistics - [GET]</code></p> <ul> <li> <p>PathParams:</p> <ul> <li>collection_id (str): STAC Collection Identifier.</li> <li>item_id (str): STAC Item Identifier.</li> </ul> </li> <li> <p>QueryParams:</p> <ul> <li>collection (str): STAC Collection Identifier. Required</li> <li>item (str): STAC Item Identifier. Required</li> <li>assets (array[str]): asset names. Default to all available assets.</li> <li>asset_bidx (array[str]): Per asset band math expression (e.g <code>Asset1|1;2;3</code>).</li> <li>asset_expression (array[str]): Per asset band math expression (e.g <code>Asset1|b1\\*b2</code>).</li> <li>max_size (int): Max image size from which to calculate statistics, default is 1024.</li> <li>height (int): Force image height from which to calculate statistics.</li> <li>width (int): Force image width from which to calculate statistics.</li> <li>nodata (str, int, float): Overwrite internal Nodata value.</li> <li>unscale (bool): Apply dataset internal Scale/Offset.</li> <li>resampling (str): RasterIO resampling algorithm. Defaults to <code>nearest</code>.</li> <li>categorical (bool): Return statistics for categorical dataset, default is false.</li> <li>c (array[float]): Pixels values for categories.</li> <li>p (array[int]): Percentile values.</li> <li>histogram_bins (str): Histogram bins.</li> <li>histogram_range (str): Comma (',') delimited Min,Max histogram bounds</li> </ul> </li> </ul> <p>Example:</p> <ul> <li><code>https://myendpoint/collections/mycollection/items/oneitem/statistics?assets=B01&amp;categorical=true&amp;c=1&amp;c=2&amp;c=3&amp;p=2&amp;p98</code></li> </ul> <p><code>:endpoint:/collections/{collection_id}/items/{item_id}/statistics - [GET]</code></p> <ul> <li> <p>PathParams:</p> <ul> <li>collection_id (str): STAC Collection Identifier.</li> <li>item_id (str): STAC Item Identifier.</li> </ul> </li> <li> <p>QueryParams:</p> <ul> <li>collection (str): STAC Collection Identifier. Required</li> <li>item (str): STAC Item Identifier. Required</li> <li>assets (array[str]): asset names.</li> <li>expression (str): rio-tiler's math expression with asset names (e.g <code>Asset1_b1/Asset2_b1</code>).</li> <li>asset_as_band (bool): tell rio-tiler that each asset is a 1 band dataset, so expression <code>Asset1/Asset2</code> can be passed.</li> <li>asset_bidx (array[str]): Per asset band math expression (e.g <code>Asset1|1;2;3</code>).</li> <li>max_size (int): Max image size from which to calculate statistics, default is 1024.</li> <li>height (int): Force image height from which to calculate statistics.</li> <li>width (int): Force image width from which to calculate statistics.</li> <li>nodata (str, int, float): Overwrite internal Nodata value.</li> <li>unscale (bool): Apply dataset internal Scale/Offset.</li> <li>resampling (str): RasterIO resampling algorithm. Defaults to <code>nearest</code>.</li> <li>categorical (bool): Return statistics for categorical dataset, default is false.</li> <li>c (array[float]): Pixels values for categories.</li> <li>p (array[int]): Percentile values.</li> <li>histogram_bins (str): Histogram bins.</li> <li>histogram_range (str): Comma (',') delimited Min,Max histogram bounds</li> </ul> </li> </ul> <p>Example:</p> <ul> <li><code>https://myendpoint/collections/mycollection/items/oneitem/statistics?assets=B01&amp;categorical=true&amp;c=1&amp;c=2&amp;c=3&amp;p=2&amp;p98</code></li> </ul> <p><code>:endpoint:/collections/{collection_id}/items/{item_id}/statistics - [POST]</code></p> <ul> <li> <p>Body:</p> <ul> <li>feature (JSON): A valid GeoJSON feature or FeatureCollection</li> </ul> </li> <li> <p>PathParams:</p> <ul> <li>collection_id (str): STAC Collection Identifier.</li> <li>item_id (str): STAC Item Identifier.</li> </ul> </li> <li> <p>QueryParams:</p> <ul> <li>assets (array[str]): asset names.</li> <li>expression (str): rio-tiler's math expression with asset names (e.g <code>Asset1_b1/Asset2_b1</code>).</li> <li>asset_as_band (bool): tell rio-tiler that each asset is a 1 band dataset, so expression <code>Asset1/Asset2</code> can be passed.</li> <li>asset_bidx (array[str]): Per asset band math expression (e.g <code>Asset1|1;2;3</code>).</li> <li>max_size (int): Max image size from which to calculate statistics.</li> <li>height (int): Force image height from which to calculate statistics.</li> <li>width (int): Force image width from which to calculate statistics.</li> <li>coord_crs (str): Coordinate Reference System of the input coordinates. Default to <code>epsg:4326</code>.</li> <li>dst_crs (str): Output Coordinate Reference System. Default to <code>coord_crs</code>.</li> <li>nodata (str, int, float): Overwrite internal Nodata value.</li> <li>unscale (bool): Apply dataset internal Scale/Offset.</li> <li>resampling (str): RasterIO resampling algorithm. Defaults to <code>nearest</code>.</li> <li>reproject (str): WarpKernel resampling algorithm (only used when doing re-projection). Defaults to <code>nearest</code>.</li> <li>categorical (bool): Return statistics for categorical dataset, default is false.</li> <li>c (array[float]): Pixels values for categories.</li> <li>p (array[int]): Percentile values.</li> <li>histogram_bins (str): Histogram bins.</li> <li>histogram_range (str): Comma (',') delimited Min,Max histogram bounds</li> </ul> </li> </ul> <p>Example:</p> <ul> <li><code>https://myendpoint/collections/mycollection/items/oneitem/statistics?assets=B01&amp;categorical=true&amp;c=1&amp;c=2&amp;c=3&amp;p=2&amp;p98</code></li> </ul>"},{"location":"endpoints/ogc_wmts_endpoints/","title":"OGC Web Map Tile Service","text":""},{"location":"endpoints/ogc_wmts_endpoints/#ogc-wmts-endpoints","title":"OGC WMTS endpoints","text":"Method URL Output Description <code>GET</code> <code>/wmts</code> XML or image/bin or GeoJSON OGC Web map tile service (KVP encoding) <code>GET</code> <code>/layers/{LAYER}/{STYLE}/{TIME}/{TileMatrixSet}/{TileMatrix}/{TileCol}/{TileRow}.{FORMAT}</code> image/bin OGC GetTile (REST encoding)"},{"location":"endpoints/ogc_wmts_endpoints/#wmts-getcapabilities-gettile-getfeatureinfo-kvp-encoding","title":"WMTS (GetCapabilities / GetTile / GetFeatureInfo) - KVP Encoding","text":"<p><code>:endpoint:/wmts</code></p> <ul> <li> <p>QueryParams:</p> <ul> <li> <p><code>GetCapabilities</code>:</p> <ul> <li>Request ([<code>GetCapabilities</code>, <code>GetTile</code>, <code>GetFeatureInfo</code>]): Operation name</li> <li>Service ([<code>wmts</code>]): Service type identifier</li> <li>Version ([<code>1.0.0</code>], optional): Standard and schema version</li> </ul> </li> <li> <p><code>GetTile</code>:</p> <ul> <li>Layer (str): Layer identifier</li> <li>Format (str): Output image format</li> <li>Style (str): Style identifier</li> <li>TileMatrixSet (str): TileMatrixSet identifier</li> <li>TileMatrix (int): TileMatrix identifier</li> <li>TileRow (int): Row index of tile matrix</li> <li>TileCol (int): Column index of tile matrix</li> <li>Time (str, Optional): TIME Dimension</li> </ul> </li> <li> <p><code>GetFeatureInfo</code>:</p> <ul> <li>I (int): Column index of a pixel in the tile</li> <li>J (int): Row index of a pixel in the tile</li> <li>InfoFormat ([<code>application/geo+json</code>]): Output format of the retrieved information</li> </ul> </li> </ul> </li> </ul> <p>Example:</p> <ul> <li><code>https://myendpoint/wmts?Request=GetCapabilities&amp;Services=wmts&amp;Version=1.0.0</code></li> <li><code>https://myendpoint/wmts?Request=GetTiles&amp;Services=wmts&amp;Version=1.0.0&amp;Style=default&amp;Layer=MyLayer&amp;TileMatrixSet=WebMercatorQuad&amp;TileMatrix=0&amp;TileRow=0&amp;TileCol=0&amp;Time=2023-01-01&amp;Format=image/png</code></li> <li><code>https://myendpoint/wmts?Request=GetTiles&amp;Services=wmts&amp;Version=1.0.0&amp;Style=default&amp;Layer=MyLayer&amp;TileMatrixSet=WebMercatorQuad&amp;TileMatrix=0&amp;TileRow=0&amp;TileCol=0&amp;Time=2023-01-01&amp;Format=image/png&amp;I=100&amp;J=100&amp;InfoFormat=\"application/geo+json</code></li> </ul>"},{"location":"endpoints/ogc_wmts_endpoints/#gettile-rest","title":"GetTile - REST","text":"<p><code>:endpoint:/layers/{LAYER}/{STYLE}/{TIME}/{TileMatrixSet}/{TileMatrix}/{TileCol}/{TileRow}.{FORMAT}</code></p> <ul> <li>PathParams:<ul> <li>Layer (str): Layer identifier (collection_id)</li> <li>Style (str): Style identifier</li> <li>Time (str): TIME Dimension</li> <li>TileMatrixSet (str): TileMatrixSet identifier</li> <li>TileMatrix (int): TileMatrix identifier</li> <li>TileRow (int): Row index of tile matrix</li> <li>TileCol (int): Column index of tile matrix</li> <li>Format (str): Output image format</li> </ul> </li> </ul> <p>Example:</p> <ul> <li><code>https://myendpoint/layers/my-collection/default/2023-01-01/WebMercatorQuad/0/0/0.png</code></li> </ul>"},{"location":"endpoints/tms_endpoints/","title":"OGC TileMatrix Schemes","text":"Method URL Output Description <code>GET</code> <code>/tileMatrixSets</code> JSON (TMS list) return the list of supported TileMatrixSet <code>GET</code> <code>/tileMatrixSets/{TileMatrixSetId}</code> JSON (TileMatrixSet) return the TileMatrixSet JSON document"},{"location":"endpoints/tms_endpoints/#list-tms","title":"List TMS","text":"<p><code>:endpoint:/tileMatrixSets</code> - Get the list of supported TileMatrixSet</p> <pre><code>curl https://myendpoint/tileMatrixSets | jq\n&gt;&gt; {\n  \"tileMatrixSets\": [\n    {\n      \"id\": \"LINZAntarticaMapTilegrid\",\n      \"title\": \"LINZ Antarctic Map Tile Grid (Ross Sea Region)\",\n      \"links\": [\n        {\n          \"href\": \"https://myendpoint/tileMatrixSets/LINZAntarticaMapTilegrid\",\n          \"rel\": \"item\",\n          \"type\": \"application/json\"\n        }\n      ]\n    },\n    ...\n  ]\n}\n</code></pre>"},{"location":"endpoints/tms_endpoints/#get-tms-info","title":"Get TMS info","text":"<p><code>:endpoint:/tileMatrixSets/{TileMatrixSetId}</code> - Get the TileMatrixSet JSON document</p> <ul> <li>PathParams:<ul> <li>TileMatrixSetId: TileMatrixSet name</li> </ul> </li> </ul> <pre><code>curl http://127.0.0.1:8000/tileMatrixSets/WebMercatorQuad | jq\n&gt;&gt; {\n  \"type\": \"TileMatrixSetType\",\n  \"title\": \"Google Maps Compatible for the World\",\n  \"identifier\": \"WebMercatorQuad\",\n  \"supportedCRS\": \"http://www.opengis.net/def/crs/EPSG/0/3857\",\n  \"wellKnownScaleSet\": \"http://www.opengis.net/def/wkss/OGC/1.0/GoogleMapsCompatible\",\n  \"boundingBox\": {\n    \"type\": \"BoundingBoxType\",\n    \"crs\": \"http://www.opengis.net/def/crs/EPSG/0/3857\",\n    \"lowerCorner\": [\n      -20037508.3427892,\n      -20037508.3427892\n    ],\n    \"upperCorner\": [\n      20037508.3427892,\n      20037508.3427892\n    ]\n  },\n  \"tileMatrix\": [\n    {\n      \"type\": \"TileMatrixType\",\n      \"identifier\": \"0\",\n      \"scaleDenominator\": 559082264.028717,\n      \"topLeftCorner\": [\n        -20037508.3427892,\n        20037508.3427892\n      ],\n      \"tileWidth\": 256,\n      \"tileHeight\": 256,\n      \"matrixWidth\": 1,\n      \"matrixHeight\": 1\n    },\n    ...\n</code></pre>"}]}